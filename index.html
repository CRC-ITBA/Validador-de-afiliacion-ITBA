<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Validador de Afiliaci√≥n ‚Äî ITBA</title>
  <meta name="description" content="Verificador de afiliaci√≥n institucional del ITBA.">
  <link rel="icon" type="image/png" href="favicon.png">
  <meta property="og:title" content="Validador de Afiliaci√≥n ‚Äî ITBA">
  <meta property="og:description" content="Verific√° si tu afiliaci√≥n coincide con la forma oficial y copiala en un clic.">
  <meta property="og:type" content="website">
  <meta property="og:image" content="og-image.png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta name="twitter:card" content="summary_large_image">
  <style>
    :root{
      --brand:#02558b; --brand-ink:#ffffff;
      --bg:#f7f7fb; --card:#fff; --ink:#222; --muted:#666;
      --ok:#176f2c; --bad:#9b1c1c; --line:#e6e6ef; --chip:#eef6ff;
      --ring: rgba(29,78,216,.2);
    }
    *{box-sizing:border-box}
    body{margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif; color:var(--ink); background:linear-gradient(180deg,#f9fafb, #fff);}
    .wrap{max-width:960px; margin:40px auto; padding:0 16px;}
    h1{font-size:28px; margin:0}
    p{margin:8px 0}
    .brand{display:flex; align-items:center; gap:16px; background:var(--brand); color:var(--brand-ink); padding:14px 16px; border-radius:16px; box-shadow:0 4px 16px rgba(0,0,0,.06);}
    .brand .logo{width:56px; height:56px; object-fit:contain; border-radius:12px; background:rgba(255,255,255,.08); padding:6px; display:block;}
    .brand .muted{color:#e6ecff}
    .card{background:var(--card); border:1px solid var(--line); border-radius:16px; padding:16px; box-shadow:0 1px 3px rgba(0,0,0,.04)}
    .label{font-size:14px; color:var(--muted)}
    .input{width:100%; margin-top:8px; padding:12px 14px; font-size:16px; border:1px solid var(--line); border-radius:12px; outline:none}
    .input:focus{border-color:var(--brand); box-shadow:0 0 0 3px var(--ring)}
    .row{display:flex; gap:12px; justify-content:space-between; align-items:center; flex-wrap:wrap}
    .badge{display:inline-flex; gap:8px; align-items:center; font-weight:600; font-size:14px; padding:6px 12px; border-radius:999px;}
    .ok{background:#e8f5ee; color:var(--ok); border:1px solid #cfe9da}
    .bad{background:#fdecec; color:var(--bad); border:1px solid #f6d2d2}
    .btn{display:inline-flex; gap:8px; align-items:center; font-size:14px; padding:10px 14px; border:1px solid var(--line); border-radius:999px; background:#fff; cursor:pointer}
    .btn:hover{box-shadow:0 1px 6px rgba(0,0,0,.06)}
    .btn-primary{background:var(--brand); color:var(--brand-ink); border-color:transparent}
    .btn-primary:hover{filter:brightness(0.96)}
    .hint{font-size:14px; color:var(--ink)}
    ul{padding-left:18px}
    .muted{color:var(--muted); font-size:12px}
    a{color:#1d4ed8; text-decoration:underline}
    .note{background:#f6f7fb; border:1px dashed #ccd; padding:10px 12px; border-radius:12px; font-size:13px}
    .footer{margin-top:24px; color:var(--muted); font-size:12px}
  </style>
</head>
<body>
  <div class="wrap">
    <header class="brand">
      <img src="logo-itba.png" alt="ITBA" class="logo" onerror="this.style.display='none'">
      <div>
        <h1>Validador de Afiliaci√≥n ‚Äî ITBA</h1>
        <p class="muted">Forma oficial: <strong id="canonical">Instituto Tecnol√≥gico de Buenos Aires (ITBA)</strong></p>
      </div>
    </header>

    <section class="card" style="margin-top:18px" aria-labelledby="sec-individual">
      <label for="input" class="label">Peg√° o escrib√≠ la afiliaci√≥n a validar</label>
      <input id="input" class="input" placeholder="Ej.: Instituto Tecnol√≥gico de Buenos Aires (ITBA)">
      <div class="row" style="margin-top:12px">
        <div id="badge" class="badge bad" role="status" aria-live="polite">‚ùå Afiliaci√≥n inv√°lida</div>
        <button id="copy" class="btn btn-primary" type="button">üìã Copiar forma oficial</button>
      </div>

      <div id="panel" class="card" style="margin-top:12px; display:none">
        <p class="hint">Comparaci√≥n frente a la forma oficial:</p>
        <ul id="details"></ul>
      </div>

      <div class="note" style="margin-top:12px">
        Consejo: us√° exactamente <strong>Instituto Tecnol√≥gico de Buenos Aires (ITBA)</strong>. Pod√©s pegarla con el bot√≥n.
      </div>
    </section>

    <footer class="footer">
      <p>Sugerencia CRC: us√° siempre la afiliaci√≥n exacta y, cuando aplique, a√±ad√≠ tu unidad/centro en otra l√≠nea o campo separado.</p>
      <p>ROR ITBA: <a href="https://ror.org/02qwadn23" target="_blank" rel="noreferrer">https://ror.org/02qwadn23</a></p>
    </footer>
  </div>

<script>
(function(){
  const CANONICAL = "Instituto Tecnol√≥gico de Buenos Aires (ITBA)";
  const ACCEPTED_VARIANTS = [ CANONICAL ]; // agreg√° variantes si hiciera falta

  const input = document.getElementById("input");
  const badge = document.getElementById("badge");
  const panel = document.getElementById("panel");
  const details = document.getElementById("details");
  const copyBtn = document.getElementById("copy");

  function stripDiacritics(str){
    return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "");
  }
  function normalize(str){
    return stripDiacritics(str).replace(/\s+/g, " ").trim().toLowerCase();
  }

  function levenshtein(a,b){
    const m=a.length, n=b.length;
    const dp = Array.from({length:m+1},()=>Array(n+1).fill(0));
    for(let i=0;i<=m;i++) dp[i][0]=i;
    for(let j=0;j<=n;j++) dp[0][j]=j;
    for(let i=1;i<=m;i++){
      for(let j=1;j<=n;j++){
        const cost = a[i-1]===b[j-1]?0:1;
        dp[i][j] = Math.min(dp[i-1][j]+1, dp[i][j-1]+1, dp[i-1][j-1]+cost);
      }
    }
    return dp[m][n];
  }

  function hints(s){
    const hs = [];
    if(!s.includes("(ITBA)")) hs.push("Falta el acr√≥nimo ‚Äò(ITBA)‚Äô.");
    if(/tecnologico/i.test(s) && !/Tecnol√≥gico/.test(s)) hs.push("‚ÄòTecnol√≥gico‚Äô debe llevar tilde.");
    if(/buenos aires/i.test(s) && !/Buenos Aires/.test(s)) hs.push("Usar may√∫sculas en ‚ÄòBuenos Aires‚Äô.");
    if(/instituto tecnologico de buenos aires \(itba\)/i.test(normalize(s)) && s !== CANONICAL){
      hs.push("Revisar may√∫sculas y tildes para coincidir exactamente con la forma oficial.");
    }
    return hs;
  }

  function renderVerdict(){
    const text = input.value.trim();
    const isAccepted = ACCEPTED_VARIANTS.includes(text);
    if(isAccepted){
      badge.className = "badge ok";
      badge.textContent = "‚úÖ Afiliaci√≥n v√°lida";
      panel.style.display = "none";
      return;
    }
    badge.className = "badge bad";
    badge.textContent = "‚ùå Afiliaci√≥n inv√°lida";
    const a = normalize(text), b = normalize(CANONICAL);
    const dist = levenshtein(a,b);
    const hs = hints(text);
    details.innerHTML = "";
    const li1 = document.createElement("li");
    li1.innerHTML = "<strong>Sugerida:</strong> " + CANONICAL;
    const li2 = document.createElement("li");
    li2.innerHTML = "<strong>Distancia aproximada:</strong> " + dist + " (0 = id√©ntica)";
    details.appendChild(li1); details.appendChild(li2);
    if(hs.length){
      const li = document.createElement("li");
      li.innerHTML = "<strong>Pistas:</strong>";
      const ul = document.createElement("ul");
      hs.forEach(h => { const x = document.createElement("li"); x.textContent = h; ul.appendChild(x); });
      li.appendChild(ul);
      details.appendChild(li);
    }
    panel.style.display = "block";
  }

  input.addEventListener("input", renderVerdict);

  copyBtn.addEventListener("click", async ()=>{
    const text = CANONICAL;
    try{
      if(navigator.clipboard && navigator.clipboard.writeText){
        await navigator.clipboard.writeText(text);
      }else{ throw new Error("No clipboard API"); }
      copyBtn.textContent = "‚úÖ Copiado";
      setTimeout(()=>copyBtn.textContent="üìã Copiar forma oficial", 1200);
    }catch(e){
      const ta = document.createElement("textarea");
      ta.value = text;
      ta.setAttribute("readonly","");
      ta.style.position="fixed";
      ta.style.opacity="0";
      document.body.appendChild(ta);
      ta.select();
      try{ document.execCommand("copy"); }catch{}
      document.body.removeChild(ta);
      copyBtn.textContent = "‚úÖ Copiado";
      setTimeout(()=>copyBtn.textContent="üìã Copiar forma oficial", 1200);
    }
  });

  renderVerdict();
})();
</script>
</body>
</html>
